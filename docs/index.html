<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Masonry - Masonry Layout for Social Media Embeds</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg-primary: #0a0a0b;
      --bg-secondary: #111113;
      --bg-card: #18181b;
      --bg-card-hover: #1f1f23;
      --text-primary: #fafafa;
      --text-secondary: #a1a1aa;
      --text-muted: #71717a;
      --border: #27272a;
      --accent: #3b82f6;
    }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }

    .hero { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 2rem; position: relative; }
    .hero::before { content: ''; position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 800px; height: 800px; background: radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%); pointer-events: none; }
    .hero-content { position: relative; z-index: 1; max-width: 800px; }
    .badge { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 9999px; font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1.5rem; }
    .badge-dot { width: 8px; height: 8px; background: #22c55e; border-radius: 50%; animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    h1 { font-size: clamp(3rem, 8vw, 5rem); font-weight: 700; line-height: 1.1; margin-bottom: 1.5rem; background: linear-gradient(135deg, #fff 0%, #a1a1aa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .hero-description { font-size: 1.25rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto 2rem; }
    .hero-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
    .btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.875rem 1.5rem; border-radius: 12px; font-size: 1rem; font-weight: 500; text-decoration: none; transition: all 0.2s ease; cursor: pointer; border: none; }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { background: #60a5fa; transform: translateY(-2px); }
    .btn-secondary { background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border); }
    .btn-secondary:hover { background: var(--bg-card-hover); }

    .section { padding: 6rem 2rem; max-width: 1200px; margin: 0 auto; }
    .section-title { font-size: 2.5rem; font-weight: 700; text-align: center; margin-bottom: 1rem; }
    .section-subtitle { text-align: center; color: var(--text-secondary); max-width: 600px; margin: 0 auto 4rem; }

    .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
    .feature-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; transition: all 0.2s ease; }
    .feature-card:hover { border-color: var(--text-muted); transform: translateY(-4px); }
    .feature-icon { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; border-radius: 12px; margin-bottom: 1rem; font-size: 1.5rem; }
    .feature-icon.blue { background: rgba(59, 130, 246, 0.2); }
    .feature-icon.pink { background: rgba(236, 72, 153, 0.2); }
    .feature-icon.green { background: rgba(34, 197, 94, 0.2); }
    .feature-icon.purple { background: rgba(168, 85, 247, 0.2); }
    .feature-icon.orange { background: rgba(249, 115, 22, 0.2); }
    .feature-icon.cyan { background: rgba(6, 182, 212, 0.2); }
    .feature-title { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem; }
    .feature-description { color: var(--text-secondary); font-size: 0.9375rem; }

    .demo { padding: 6rem 2rem; background: var(--bg-secondary); }
    .demo-container { max-width: 1400px; margin: 0 auto; }
    .demo-controls { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 2rem; }
    .control-group { display: flex; align-items: center; gap: 0.5rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 0.5rem; }
    .control-btn { padding: 0.5rem 1rem; border-radius: 8px; border: none; background: transparent; color: var(--text-secondary); cursor: pointer; transition: all 0.2s ease; font-size: 0.875rem; font-weight: 500; }
    .control-btn:hover { color: var(--text-primary); }
    .control-btn.active { background: var(--accent); color: white; }

    .masonry-container {
      display: flex;
      justify-content: center;
      gap: 16px;
      width: 100%;
    }
    .masonry-column {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .masonry-container[data-columns="2"] .masonry-column {
      width: 550px;
    }
    .masonry-container[data-columns="3"] .masonry-column {
      width: 400px;
    }
    .masonry-container[data-columns="4"] .masonry-column {
      width: 330px;
    }
    /* Instagram embed constraints */
    .instagram-media {
      min-width: 300px !important;
      max-width: 100% !important;
    }
    .embed-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 200px;
      color: var(--text-muted);
    }

    .code-tabs { display: flex; gap: 0; margin-bottom: 0; background: var(--bg-card); border: 1px solid var(--border); border-bottom: none; border-radius: 12px 12px 0 0; overflow: hidden; }
    .code-tab { padding: 1rem 1.5rem; border: none; background: transparent; color: var(--text-secondary); cursor: pointer; font-size: 0.9375rem; font-weight: 500; }
    .code-tab:hover { color: var(--text-primary); }
    .code-tab.active { background: var(--bg-secondary); color: var(--text-primary); }
    .code-block { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 0 0 12px 12px; overflow: hidden; }
    .code-block pre { padding: 1.5rem; overflow-x: auto; font-family: 'JetBrains Mono', monospace; font-size: 0.875rem; line-height: 1.7; }
    .code-keyword { color: #c678dd; }
    .code-string { color: #98c379; }
    .code-function { color: #61afef; }
    .code-property { color: #e5c07b; }
    .code-number { color: #d19a66; }
    .code-comment { color: #5c6370; font-style: italic; }

    footer { padding: 4rem 2rem; text-align: center; border-top: 1px solid var(--border); }
    .footer-links { display: flex; gap: 2rem; justify-content: center; margin-bottom: 1.5rem; }
    .footer-links a { color: var(--text-secondary); text-decoration: none; }
    .footer-links a:hover { color: var(--text-primary); }
    .footer-copy { color: var(--text-muted); font-size: 0.875rem; }
  </style>
</head>
<body>
  <section class="hero">
    <div class="hero-content">
      <div class="badge"><span class="badge-dot"></span>v1.0.2 ‚Äî Now Available</div>
      <h1>Masonry Layout for Social Embeds</h1>
      <p class="hero-description">Display X (Twitter) and Instagram posts using official widgets in beautiful masonry layouts. Auto-sizing, responsive, and easy to use.</p>
      <div class="hero-buttons">
        <a href="#demo" class="btn btn-primary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          Live Demo
        </a>
        <a href="https://github.com/tkana-dev/social-masonry" class="btn btn-secondary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          GitHub
        </a>
      </div>
    </div>
  </section>

  <section class="section">
    <h2 class="section-title">Why Social Masonry?</h2>
    <p class="section-subtitle">The simplest way to embed social media posts with proper masonry layout.</p>
    <div class="features-grid">
      <div class="feature-card"><div class="feature-icon blue">üîó</div><h3 class="feature-title">Official Widgets</h3><p class="feature-description">Uses Twitter's widgets.js and Instagram's embed.js for native embeds.</p></div>
      <div class="feature-card"><div class="feature-icon pink">üìê</div><h3 class="feature-title">Auto-sizing</h3><p class="feature-description">Each embed automatically adjusts to its content height. No fixed heights.</p></div>
      <div class="feature-card"><div class="feature-icon green">üì±</div><h3 class="feature-title">Fully Responsive</h3><p class="feature-description">Adaptive columns that look great on any device size.</p></div>
      <div class="feature-card"><div class="feature-icon purple">üåô</div><h3 class="feature-title">Theme Support</h3><p class="feature-description">Light and dark themes for Twitter embeds.</p></div>
      <div class="feature-card"><div class="feature-icon orange">‚öõÔ∏è</div><h3 class="feature-title">React Component</h3><p class="feature-description">First-class React component with TypeScript support.</p></div>
      <div class="feature-card"><div class="feature-icon cyan">ü™∂</div><h3 class="feature-title">Lightweight</h3><p class="feature-description">Minimal bundle size. Widgets loaded on-demand.</p></div>
    </div>
  </section>

  <section class="demo" id="demo">
    <div class="demo-container">
      <h2 class="section-title">Live Demo</h2>
      <p class="section-subtitle">Real Twitter and Instagram embeds using official widgets.</p>
      <div class="demo-controls">
        <div class="control-group">
          <span style="color: var(--text-muted); padding: 0 0.5rem; font-size: 0.875rem;">Columns:</span>
          <button class="control-btn" data-columns="2">2</button>
          <button class="control-btn active" data-columns="3">3</button>
          <button class="control-btn" data-columns="4">4</button>
        </div>
        <div class="control-group">
          <span style="color: var(--text-muted); padding: 0 0.5rem; font-size: 0.875rem;">Theme:</span>
          <button class="control-btn" data-theme="light">Light</button>
          <button class="control-btn active" data-theme="dark">Dark</button>
        </div>
      </div>
      <div class="masonry-container" id="masonry"></div>
    </div>
  </section>

  <section class="section">
    <h2 class="section-title">Quick Start</h2>
    <p class="section-subtitle">Get up and running in minutes.</p>
    <div class="code-tabs">
      <button class="code-tab active" data-tab="react">React</button>
      <button class="code-tab" data-tab="install">Install</button>
    </div>
    <div class="code-block">
      <pre id="code-content"><code><span class="code-keyword">import</span> { SocialMasonry } <span class="code-keyword">from</span> <span class="code-string">'social-masonry/react'</span>;

<span class="code-keyword">function</span> <span class="code-function">App</span>() {
  <span class="code-keyword">const</span> posts = [
    { <span class="code-property">platform</span>: <span class="code-string">'twitter'</span>, <span class="code-property">url</span>: <span class="code-string">'https://x.com/user/status/123'</span> },
    { <span class="code-property">platform</span>: <span class="code-string">'instagram'</span>, <span class="code-property">url</span>: <span class="code-string">'https://instagram.com/p/ABC'</span> },
  ];

  <span class="code-keyword">return</span> (
    &lt;<span class="code-function">SocialMasonry</span>
      <span class="code-property">posts</span>={posts}
      <span class="code-property">columns</span>={[
        { <span class="code-property">columns</span>: <span class="code-number">3</span>, <span class="code-property">minWidth</span>: <span class="code-number">1024</span> },
        { <span class="code-property">columns</span>: <span class="code-number">2</span>, <span class="code-property">minWidth</span>: <span class="code-number">640</span> },
        { <span class="code-property">columns</span>: <span class="code-number">1</span>, <span class="code-property">minWidth</span>: <span class="code-number">0</span> },
      ]}
      <span class="code-property">gap</span>={<span class="code-number">16</span>}
      <span class="code-property">theme</span>=<span class="code-string">"light"</span>
    /&gt;
  );
}</code></pre>
    </div>
  </section>

  <footer>
    <div class="footer-links">
      <a href="https://github.com/tkana-dev/social-masonry#readme">Documentation</a>
      <a href="https://github.com/tkana-dev/social-masonry">GitHub</a>
      <a href="https://www.npmjs.com/package/social-masonry">npm</a>
    </div>
    <p class="footer-copy">MIT License</p>
  </footer>

  <!-- Twitter Widget -->
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  <!-- Instagram Embed -->
  <script async src="https://www.instagram.com/embed.js"></script>

  <script>
    // Demo posts - real URLs
    const posts = [
      { platform: 'twitter', url: 'https://x.com/syou_koeda/status/2007800813381710176' },
      { platform: 'twitter', url: 'https://x.com/Tagotch/status/1996561616238936486' },
      { platform: 'instagram', url: 'https://www.instagram.com/p/CHyVcrApLE0/' },
      { platform: 'twitter', url: 'https://x.com/matsuken0814/status/2006171582440563024' },
      { platform: 'twitter', url: 'https://x.com/BRUTUS_mag/status/2006924668943401075' },
      { platform: 'instagram', url: 'https://www.instagram.com/p/CLM0JsvFI13/' },
      { platform: 'twitter', url: 'https://x.com/misosp/status/2007073352528298410' },
      { platform: 'twitter', url: 'https://x.com/oicyan777/status/2001780683946234300' },
      { platform: 'instagram', url: 'https://www.instagram.com/p/CnocSLlNj9V/' },
      { platform: 'twitter', url: 'https://x.com/GZQLyOMt7QfyXlE/status/2005586043958108508' },
      { platform: 'twitter', url: 'https://x.com/rena07110/status/2006322414674903214' },
      { platform: 'twitter', url: 'https://x.com/inunonekochan/status/2005095196955115827' },
    ];

    let currentColumns = 3;
    let currentTheme = 'dark';

    function extractTweetId(url) {
      const match = url.match(/(?:twitter\.com|x\.com)\/\w+\/status\/(\d+)/);
      return match ? match[1] : null;
    }

    function extractInstagramId(url) {
      const match = url.match(/instagram\.com\/(?:p|reel)\/([A-Za-z0-9_-]+)/);
      return match ? match[1] : null;
    }

    function distributeToColumns(posts, columns) {
      const cols = Array.from({ length: columns }, () => []);
      posts.forEach((post, index) => {
        cols[index % columns].push(post);
      });
      return cols;
    }

    function render() {
      const container = document.getElementById('masonry');
      container.innerHTML = '';
      container.dataset.columns = currentColumns;

      const columns = distributeToColumns(posts, currentColumns);

      columns.forEach((columnPosts, colIndex) => {
        const columnDiv = document.createElement('div');
        columnDiv.className = 'masonry-column';

        columnPosts.forEach(post => {
          const wrapper = document.createElement('div');
          wrapper.className = 'embed-wrapper';

          if (post.platform === 'twitter') {
            const tweetId = extractTweetId(post.url);
            if (tweetId && window.twttr) {
              // Calculate column width for proper sizing
              const containerWidth = document.getElementById('masonry').clientWidth;
              const gap = 16;
              const columnWidth = Math.floor((containerWidth - gap * (currentColumns - 1)) / currentColumns);

              window.twttr.widgets.createTweet(tweetId, wrapper, {
                theme: currentTheme,
                conversation: 'none',
                dnt: true,
                width: columnWidth,
              });
            }
          } else if (post.platform === 'instagram') {
            const igId = extractInstagramId(post.url);
            if (igId) {
              wrapper.innerHTML = `
                <blockquote
                  class="instagram-media"
                  data-instgrm-captioned
                  data-instgrm-permalink="https://www.instagram.com/p/${igId}/"
                  data-instgrm-version="14"
                  style="
                    background:#FFF;
                    border:0;
                    border-radius:12px;
                    box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15);
                    margin: 0;
                    max-width:100%;
                    min-width:100%;
                    padding:0;
                    width:100%;
                  "
                >
                </blockquote>
              `;
            }
          }

          columnDiv.appendChild(wrapper);
        });

        container.appendChild(columnDiv);
      });

      // Process Instagram embeds
      if (window.instgrm) {
        window.instgrm.Embeds.process();
      }
    }

    // Wait for Twitter widget to load
    if (window.twttr) {
      window.twttr.ready(() => render());
    } else {
      window.addEventListener('load', () => {
        setTimeout(render, 1000);
      });
    }

    // Event listeners
    document.querySelectorAll('[data-columns]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('[data-columns]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentColumns = parseInt(btn.dataset.columns);
        render();
      });
    });

    document.querySelectorAll('[data-theme]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('[data-theme]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentTheme = btn.dataset.theme;
        render();
      });
    });

    document.querySelectorAll('[data-tab]').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('[data-tab]').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const code = btn.dataset.tab === 'install'
          ? `npm install social-masonry

<span class="code-comment"># or</span>
yarn add social-masonry

<span class="code-comment"># or</span>
pnpm add social-masonry`
          : `<span class="code-keyword">import</span> { SocialMasonry } <span class="code-keyword">from</span> <span class="code-string">'social-masonry/react'</span>;

<span class="code-keyword">function</span> <span class="code-function">App</span>() {
  <span class="code-keyword">const</span> posts = [
    { <span class="code-property">platform</span>: <span class="code-string">'twitter'</span>, <span class="code-property">url</span>: <span class="code-string">'https://x.com/user/status/123'</span> },
    { <span class="code-property">platform</span>: <span class="code-string">'instagram'</span>, <span class="code-property">url</span>: <span class="code-string">'https://instagram.com/p/ABC'</span> },
  ];

  <span class="code-keyword">return</span> (
    &lt;<span class="code-function">SocialMasonry</span>
      <span class="code-property">posts</span>={posts}
      <span class="code-property">columns</span>={[
        { <span class="code-property">columns</span>: <span class="code-number">3</span>, <span class="code-property">minWidth</span>: <span class="code-number">1024</span> },
        { <span class="code-property">columns</span>: <span class="code-number">2</span>, <span class="code-property">minWidth</span>: <span class="code-number">640</span> },
        { <span class="code-property">columns</span>: <span class="code-number">1</span>, <span class="code-property">minWidth</span>: <span class="code-number">0</span> },
      ]}
      <span class="code-property">gap</span>={<span class="code-number">16</span>}
      <span class="code-property">theme</span>=<span class="code-string">"light"</span>
    /&gt;
  );
}`;
        document.getElementById('code-content').innerHTML = `<code>${code}</code>`;
      });
    });
  </script>
</body>
</html>
